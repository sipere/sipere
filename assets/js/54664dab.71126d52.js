"use strict";(globalThis.webpackChunksiperweb=globalThis.webpackChunksiperweb||[]).push([[865],{2180:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"authority/protection","title":"Route protection","description":"We can set authentication for each endpoint in the api.js file.","source":"@site/docs/7_authority/1_protection.md","sourceDirName":"7_authority","slug":"/authority/protection","permalink":"/sipere/docs/authority/protection","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Data import","permalink":"/sipere/docs/additional/import"},"next":{"title":"Using admin user","permalink":"/sipere/docs/authority/admin"}}');var r=o(4848),i=o(8453);const s={sidebar_position:1},a="Route protection",c={},l=[];function p(e){const t={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"route-protection",children:"Route protection"})}),"\n",(0,r.jsx)(t.p,{children:"We can set authentication for each endpoint in the api.js file."}),"\n",(0,r.jsx)(t.p,{children:"For the get(), post(), put(), patch() or delete() methods, set the verifyToken middleware as the second parameter. This will ensure that the endpoints are only accessible after authentication."}),"\n",(0,r.jsx)(t.p,{children:"In our example, in square brackets is:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"[verifyToken]\n"})}),"\n",(0,r.jsx)(t.p,{children:"One route protected:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"router.get('/employees', [verifyToken], EmployeeController.index);\n"})}),"\n",(0,r.jsx)(t.p,{children:"All methods are protected:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",children:"router.get('/employees', [verifyToken], EmployeeController.index);\nrouter.get('/employees/:id', [verifyToken], EmployeeController.show);\nrouter.post('/employees', [verifyToken], EmployeeController.store);\nrouter.put('/employees/:id', [verifyToken], EmployeeController.update);\nrouter.delete('/employees/:id', [verifyToken], EmployeeController.destroy);\n"})}),"\n",(0,r.jsx)(t.p,{children:"If we set up protection for a route, we need to log in with the login endpoint before accessing it. We received a token that needs to be sent back to access the protected route."})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>a});var n=o(6540);const r={},i=n.createContext(r);function s(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);